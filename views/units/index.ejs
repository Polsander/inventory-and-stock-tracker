<% layout("layouts/boilerplate") %>

    <% if (currentUser.isSuperAdmin) {%> 
    <form action="/units/new" class="mt-3 mb-5">
        <button class="btn btn-success">Add Unit</button>
    </form>
    <% } %> 


    <table class="table table-striped table-bordered">
        <thead class="text-center" >
            <tr class="bg-warning">
                <th scope="col">#</th>
                <th scope="col"> Unit Name</th>
                <th scope="col">Cabinet</th>
                <th scope="col">Quantity (Langley)</th>
            </tr>
        </thead>
        
        <tbody class="text-center">
            <% let columnNumber =1 %>
            <% for (let i=0; i< cabinets.length; i++) { %>
                <% openCabinet=cabinets[i] %>

                <% for (let unit of openCabinet.units) { %>
                    <tr>
                        <th scope="row">
                            <%= columnNumber %>
                        </th>
                        <td><a href="units/<%= unit._id %> ">
                                <%= unit.name %>
                            </a></td>
                        <td>
                            <%= openCabinet.name %> 
                        </td>
                        
                        <td>
                            <%= unit.langley %>
                        </td>
                        
                    </tr>
                    <% columnNumber++ %>
                <% } %>
            <% } %>
        </tbody>
    </table>